{"version":3,"file":"vue3-resize.esm.js","sources":["../src/utils/compatibility.js","../src/package/ResizeObserver/ResizeObserver.vue","../src/package/ResizeObserver/ResizeObserver.vue?vue&type=template&id=e9ce2cc6&lang.js","../src/package/ResizeObserver/index.js","../src/index.js"],"sourcesContent":["export function getInternetExplorerVersion () {\n  const ua = window.navigator.userAgent\n\n  const msie = ua.indexOf('MSIE ')\n  if (msie > 0) {\n    // IE 10 or older => return version number\n    return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10)\n  }\n\n  const trident = ua.indexOf('Trident/')\n  if (trident > 0) {\n    // IE 11 => return version number\n    const rv = ua.indexOf('rv:')\n    return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10)\n  }\n\n  const edge = ua.indexOf('Edge/')\n  if (edge > 0) {\n    // Edge (IE 12+) => return version number\n    return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10)\n  }\n\n  // other browser\n  return -1\n}\n","<template>\n  <div\n    ref=\"elRef\"\n    class=\"vue3-resize-observer\"\n    tabindex=\"-1\"\n  />\n</template>\n\n<script>\nimport { onMounted, ref, onBeforeUnmount } from 'vue'\nimport { getInternetExplorerVersion } from '../../utils/compatibility'\n\nlet isIE\n\nfunction initCompat () {\n  if (!initCompat.init) {\n    initCompat.init = true\n    isIE = getInternetExplorerVersion() !== -1\n  }\n}\n\nexport default {\n  name: 'ResizeObserver',\n\n  props: {\n    showTrigger: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['notify'],\n\n  setup (props, { emit }) {\n    let _w = 0\n    let _h = 0\n    const elRef = ref(null)\n    let _resizeObject = null\n\n    const compareAndNotify = () => {\n      if (_w !== elRef.value.offsetWidth || _h !== elRef.value.offsetHeight) {\n        _w = elRef.value.offsetWidth\n        _h = elRef.value.offsetHeight\n\n        emit('notify', {\n          width: _w,\n          height: _h,\n        })\n      }\n    }\n\n    const addResizeHandlers = () => {\n      _resizeObject.contentDocument.defaultView.addEventListener('resize', compareAndNotify)\n      compareAndNotify()\n    }\n\n    const removeResizeHandlers = () => {\n      if (_resizeObject && _resizeObject.onload) {\n        if (!isIE && _resizeObject.contentDocument) {\n          _resizeObject.contentDocument.defaultView.removeEventListener('resize', compareAndNotify)\n        }\n\n        elRef.value.removeChild(_resizeObject)\n\n        _resizeObject.onload = null\n        _resizeObject = null\n      }\n    }\n\n    onMounted(() => {\n      initCompat()\n\n      _w = elRef.value.offsetWidth\n      _h = elRef.value.offsetHeight\n\n      const object = document.createElement('object')\n      _resizeObject = object\n\n      object.setAttribute('aria-hidden', 'true')\n      object.setAttribute('tabindex', '-1')\n      object.onload = addResizeHandlers\n      object.type = 'text/html'\n\n      if (isIE) {\n        elRef.value.appendChild(object)\n      }\n\n      object.data = 'about:blank'\n\n      if (!isIE) {\n        elRef.value.appendChild(object)\n      }\n\n      if (props.showTrigger) {\n        compareAndNotify()\n      }\n    })\n\n    onBeforeUnmount(() => {\n      removeResizeHandlers()\n    })\n\n    return { elRef }\n  },\n}\n</script>\n\n<style>\n.vue3-resize-observer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n  width: 100%;\n  height: 100%;\n  border: none;\n  background-color: transparent;\n  pointer-events: none;\n  display: block;\n  overflow: hidden;\n  opacity: 0;\n}\n\n.vue3-resize-observer object {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  z-index: -1;\n}\n</style>\n","<template>\n  <div\n    ref=\"elRef\"\n    class=\"vue3-resize-observer\"\n    tabindex=\"-1\"\n  />\n</template>\n\n<script>\nimport { onMounted, ref, onBeforeUnmount } from 'vue'\nimport { getInternetExplorerVersion } from '../../utils/compatibility'\n\nlet isIE\n\nfunction initCompat () {\n  if (!initCompat.init) {\n    initCompat.init = true\n    isIE = getInternetExplorerVersion() !== -1\n  }\n}\n\nexport default {\n  name: 'ResizeObserver',\n\n  props: {\n    showTrigger: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['notify'],\n\n  setup (props, { emit }) {\n    let _w = 0\n    let _h = 0\n    const elRef = ref(null)\n    let _resizeObject = null\n\n    const compareAndNotify = () => {\n      if (_w !== elRef.value.offsetWidth || _h !== elRef.value.offsetHeight) {\n        _w = elRef.value.offsetWidth\n        _h = elRef.value.offsetHeight\n\n        emit('notify', {\n          width: _w,\n          height: _h,\n        })\n      }\n    }\n\n    const addResizeHandlers = () => {\n      _resizeObject.contentDocument.defaultView.addEventListener('resize', compareAndNotify)\n      compareAndNotify()\n    }\n\n    const removeResizeHandlers = () => {\n      if (_resizeObject && _resizeObject.onload) {\n        if (!isIE && _resizeObject.contentDocument) {\n          _resizeObject.contentDocument.defaultView.removeEventListener('resize', compareAndNotify)\n        }\n\n        elRef.value.removeChild(_resizeObject)\n\n        _resizeObject.onload = null\n        _resizeObject = null\n      }\n    }\n\n    onMounted(() => {\n      initCompat()\n\n      _w = elRef.value.offsetWidth\n      _h = elRef.value.offsetHeight\n\n      const object = document.createElement('object')\n      _resizeObject = object\n\n      object.setAttribute('aria-hidden', 'true')\n      object.setAttribute('tabindex', '-1')\n      object.onload = addResizeHandlers\n      object.type = 'text/html'\n\n      if (isIE) {\n        elRef.value.appendChild(object)\n      }\n\n      object.data = 'about:blank'\n\n      if (!isIE) {\n        elRef.value.appendChild(object)\n      }\n\n      if (props.showTrigger) {\n        compareAndNotify()\n      }\n    })\n\n    onBeforeUnmount(() => {\n      removeResizeHandlers()\n    })\n\n    return { elRef }\n  },\n}\n</script>\n\n<style>\n.vue3-resize-observer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: -1;\n  width: 100%;\n  height: 100%;\n  border: none;\n  background-color: transparent;\n  pointer-events: none;\n  display: block;\n  overflow: hidden;\n  opacity: 0;\n}\n\n.vue3-resize-observer object {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  pointer-events: none;\n  z-index: -1;\n}\n</style>\n","import ResizeObserver from './ResizeObserver'\n\nResizeObserver.install = function (app) {\n  app.component(ResizeObserver.name, ResizeObserver)\n}\n\nexport default ResizeObserver\n","import ResizeObserver from './package/ResizeObserver'\nimport { version } from '../package.json'\n\n// Install the components\nconst install = (app) => {\n  app.use(ResizeObserver)\n}\n\n// Plugin\nconst Vue3Resize = {\n  version,\n  install,\n}\n\nexport {\n  ResizeObserver,\n  install,\n}\n\nexport default Vue3Resize\n"],"names":["getInternetExplorerVersion","ua","window","navigator","userAgent","msie","indexOf","parseInt","substring","trident","rv","edge","isIE","initCompat","init","name","props","showTrigger","type","Boolean","default","emits","setup","emit","_w","_h","elRef","ref","_resizeObject","compareAndNotify","value","offsetWidth","offsetHeight","width","height","addResizeHandlers","contentDocument","defaultView","addEventListener","removeResizeHandlers","onload","removeEventListener","removeChild","onMounted","object","document","createElement","setAttribute","appendChild","data","onBeforeUnmount","class","tabindex","_createBlock","_hoisted_1","ResizeObserver","install","app","component","use","Vue3Resize","version"],"mappings":"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"}