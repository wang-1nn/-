var Vue3ObserveVisibility2=function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.observer=null,this.frozen=!1,this.createObserver(i,n)}var e,r,o;return e=t,(r=[{key:"createObserver",value:function(t){var e=this;if(this.observer&&this.destroyObserver(),!this.frozen){var i;if(this.options="function"==typeof(i=t)?{callback:i}:i,this.callback=function(t,i){e.options.callback(t,i),t&&e.options.once&&(e.frozen=!0,e.destroyObserver())},this.callback&&this.options.throttle){var r=(this.options.throttleOptions||{}).leading;this.callback=function(t,e){var i,r,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=function(l){for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];if(o=c,!i||l!==r){var f=s.leading;"function"==typeof f&&(f=f(l,r)),i&&l===r||!f||t.apply(void 0,[l].concat(n(o))),r=l,clearTimeout(i),i=setTimeout(function(){t.apply(void 0,[l].concat(n(o))),i=0},e)}};return l._clear=function(){clearTimeout(i),i=null},l}(this.callback,this.options.throttle,{leading:function(t){return"both"===r||"visible"===r&&t||"hidden"===r&&!t}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(t){var i=t[0];if(t.length>1){var n=t.find(function(t){return t.isIntersecting});n&&(i=n)}if(e.callback){var r=i.isIntersecting&&i.intersectionRatio>=e.threshold;if(r===e.oldResult)return;e.oldResult=r,e.callback(r,i)}},this.options.intersection),setTimeout(function(){e.observer&&e.observer.observe(e.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}])&&i(e.prototype,r),o&&i(e,o),t}();function o(t,e,i){var n=e.value;if(n)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var o=new r(t,n,i);t._vue_visibilityState=o}}function s(t){var e=t._vue_visibilityState;e&&(e.destroyObserver(),delete t._vue_visibilityState)}var l={mounted:o,componentUpdated:function(t,i,n){var r=i.value;if(!function t(i,n){if(i===n)return!0;if("object"===e(i)){for(var r in i)if(!t(i[r],n[r]))return!1;return!0}return!1}(r,i.oldValue)){var l=t._vue_visibilityState;r?l?l.createObserver(r,n):o(t,{value:r},n):s(t)}},unmounted:s},a=function(t){t.use({install:function(t){t.directive("observe-visibility",l)}})},c={version:"0.0.3",install:a};return t.ObserveVisibility=l,t.default=c,t.install=a,t}({});
